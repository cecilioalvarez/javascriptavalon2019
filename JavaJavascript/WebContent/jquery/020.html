<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">

</style>
<title>Insert title here</title>
<script type="text/javascript" src="jquery-3.3.1.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	
	$("#ajax").click(function() {
		
		var promesa=$.get("../ListaLibros4.jsp"); //promesa variable que tiene un valor para siempre
		
		var promesa2=$.get("../ListaLibros5.jsp");
		
// 		promesa.then(function(datos){
// 			var datos=JSON.parse(datos.trim());
// 			for(var i=0; i<datos.length; i++){
// 				$("body").append("<p>"+datos[i].titulo+","+datos[i].autor+","+datos[i].pagina+"<p>");
// 			}
// 		})

		$.when(promesa,promesa2).then(function(datos,datos2){
			
			var datos=JSON.parse(datos[0].trim());
			
			for(var i=0; i<datos.length; i++){
					
				$("body").append("<p>"+datos[i].titulo+","+datos[i].autor+","+datos[i].pagina+"<p>");
			}
			
			var datos2=JSON.parse(datos2[0].trim());
					
			for(var i=0; i<datos.length; i++){
						
				$("body").append("<p>"+datos2[i].titulo+","+datos2[i].autor+","+datos2[i].pagina+"<p>");	
			}
		})
		
	
	})	
	
		
	
	
	
	
	
		
// 		function(datos){
// 			
// 		 function(datos){
// 				var datos=JSON.parse(datos.trim());
// 				for(var i=0; i<datos.length; i++){
// 					$("body").append("<p>"+datos[i].titulo+","+datos[i].autor+","+datos[i].pagina+"<p>");
// 				}
	
// 		})
	
		
})

</script>
</head>
<body>

<input type="button" value="ajax" id="ajax">


</body>
</html>