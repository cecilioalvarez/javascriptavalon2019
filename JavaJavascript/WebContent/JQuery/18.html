<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

</head>

<script type="text/javascript" src="./jquery-3.3.1.min.js"></script>
<script type="text/javascript">

$(document).ready(function(){
	
	$.get("../listaLibros3.jsp", function(datos){
		
		var datos = JSON.parse(datos.trim());
		
		datos.forEach((libro)=> {
			
		$('#tablaLibros').append(
				
		`<tr class='filaLibro' onmouseover='listaCapitulosPorLibro(this)'><td> ${libro.titulo} </td><td> ${libro.autor} </td></tr>`
		
		)
		
		})
	})
	
});

function listaCapitulosPorLibro(fila){
	
	$.get("../listaCapitulosLibro.jsp?tituloLibro="+$($(fila).find('td')[0]).text(), function(datos){
		
		var datos = JSON.parse(datos.trim());
		
		$('.filaCapitulo').remove();
		
		datos.forEach((capitulo)=> {
			
			$('#tablaCapitulos').append(`<tr class='filaCapitulo'><td> ${capitulo.titulo} </td><td> ${capitulo.paginas} </td></tr>`);
		})
	})
}

</script>

<body>

<table id="tablaLibros" border="1">
<tr> 
<th>Titulo</th> 
<th>Autor</th>
<tr>
</table>
<br>

<br>
<table id="tablaCapitulos" border="1">
<tr> 
<th>Titulo</th>
<th>Paginas</th>
<tr>
</table>
	

</body>
</html>